{
  "name": "CrowdSec",
  "author": ["MPThLee"],
  "url": "https://www.mediawiki.org/wiki/Extension:CrowdSec",
  "descriptionmsg": "crowdsec-desc",
  "license-name": "GPL-2.0+",
  "type": "antispam",
  "requires": {
    "MediaWiki": ">= 1.39"
  },
  "AvailableRights": ["crowdsec-bypass"],
  "GroupPermissions": {
    "sysop": {
      "crowdsec-bypass": true
    }
  },
  "AutoloadNamespaces": {
    "MediaWiki\\Extension\\CrowdSec\\": "src/"
  },
  "TestAutoloadClasses": {
    "MediaWiki\\Extension\\CrowdSec\\Tests\\CrowdSecMockHttpTrait": "tests/phpunit/CrowdSecMockHttpTrait.php"
  },
  "AutoloadClasses": {
    "MediaWiki\\Extension\\CrowdSec\\LAPIClient": "src/LAPIClient.php",
    "MediaWiki\\Extension\\CrowdSec\\StatsUtil": "src/StatsUtil.php",
    "MediaWiki\\Extension\\CrowdSec\\AbuseFilterHookHandler": "src/AbuseFilterHookHandler.php",
    "MediaWiki\\Extension\\CrowdSec\\Hooks": "src/Hooks.php"
  },
  "config": {
    "CrowdSecEnable": {
      "description": "Enable the CrowdSec feature.",
      "value": true
    },
    "CrowdSecAPIUrl": {
      "description": "Define the URL to your CrowdSec LAPI server, default to `http://localhost:8080`.",
      "value": "http://127.0.0.1:8080"
    },
    "CrowdSecAPIKey": {
      "description": "CrowdSec Bouncer Key. Key generated by the cscli (CrowdSec cli) command like `cscli bouncers add bouncer-mediawiki`",
      "value": ""
    },
    "CrowdSecCache": {
      "description": "CrowdSec's cache config. Default to `true` for performance",
      "value": true
    },
    "CrowdSecCacheTTL": {
      "description": "CrowdSec's Cache TTL. In seconds. default to `604800` which is 7 days. (60 * 60 * 24 * 7)",
      "value": 604800
    },
    "CrowdSecFallback": {
      "description": "When LAPI throws an error, decide what to do. `ban`, `captcha` or `ok`. Default/Invalid value to `ok`",
      "value": "ok"
    },
    "CrowdSecTreatTypesAsBan": {
      "description": "Type to treat as ban. Default to `[]`.",
      "value": []
    },
    "CrowdSecRestrictRead": {
      "description": "If enabled, IP who blocked doesn't read the wiki at all too. Not recommended to enable this. Default to `false`",
      "value": false
    },
    "CrowdSecReportOnly": {
      "description": "For debug purpose. Default to `false`",
      "value": false
    }
  },
  "Hooks": {
    "AbuseFilter-computeVariable": "abusefilter",
    "AbuseFilter-generateUserVars": "abusefilter",
    "AbuseFilter-builder": "abusefilter",
    "getUserPermissionsErrors": "hooks",
    "OtherBlockLogLink": "hooks"
  },
  "HookHandlers": {
    "abusefilter": {
      "class": "MediaWiki\\Extension\\CrowdSec\\AbuseFilterHookHandler",
      "services": ["MainConfig", "HttpRequestFactory"]
    },
    "hooks": {
      "class": "MediaWiki\\Extension\\CrowdSec\\Hooks",
      "services": ["MainConfig", "HttpRequestFactory"]
    }
  },
  "MessagesDirs": {
    "CrowdSec": ["i18n"]
  },
  "manifest_version": 2
}
